## Ajax是什么

- 一种创建交互式网页应用的网页开发技术
- 使用异步方式与服务器通信，不需要打断用户的操作
- 在不刷新整个页面情况下，与服务器通信交互数据

## Ajax的原理

1. 浏览器让XMLHttpRequeset去跟服务器要点数据
2. 浏览器接着干别的事情
3. xhr去向服务器请求数据
4. 服务器返回数据给xhr
5. xhr通知浏览器数据回来了
6. 浏览器收到xhr返沪的数据渲染页面

## Ajax的作用

- 减少用户等待时间，提高用户体验
- web中的界面与应用分离（或说数据与呈现分离）
- 按需取数据，可以最大程度的减少冗余请求和响应

## Ajax的缺点

- 浏览器机制的破坏——破坏了Back和History功能

- 存在安全问题——如SQL注入攻击

## Ajax的使用

1. 创建Ajax核心对象XMLHttpRequeset——记得考虑浏览器的兼容性

2. 向服务器发送请求

    - GET
      - 请求数据拼在url中

    - POST

      - 一定要设置请求头的格式内容

      - 请求数据放在send里面

    - GET和POST的区别

      - 使用Get请求时,参数在URL中显示,而使用Post方式,则放在send里面

      ![get和post的区别](C:\Users\10195\Desktop\笔记\images\get和post的区别.jpg)

      - 使用Get请求发送数据量小,Post请求发送数据量大

      - 使用Get请求安全性低，会被缓存，而Post请求反之 

3. 服务器响应处理

    - 同步（false）

    - 异步（true）

      - readyState==4

        readyState是XMLHttpRequest对象的一个属性，用来标识当前XMLHttpRequest对象处于什么状态。

            0：未初始化 -- 尚未调用.open()方法；
          1：启动 -- 已经调用.open()方法，但尚未调用.send()方法；
            2：发送 -- 已经调用.send()方法，但尚未接收到响应；
          3：接收 -- 已经接收到部分响应数据；
            4：完成 -- 已经接收到全部响应数据，而且已经可以在客户端使用了

      - status==200

        HTTP状态码(status)由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。

            - 200 表示从客户端发来的请求在服务器端被正常处理了。
            - 204 表示请求处理成功，但没有资源返回。
            - 301 表示永久性重定向。该状态码表示请求的资源已被分配了新的URI，以后应使用资源现在所指的URI。
            - 302 表示临时性重定向。
            - 304 表示客户端发送附带条件的请求时（指采用GET方法的请求报文中包含if-matched,if-modified-since,if-none-match,if-range,if-unmodified-since任一个首部）服务器端允许请求访问资源，但因发生请求未满足条件的情况后，直接返回304Modified（服务器端资源未改变，可直接使用客户端未过期的缓存）
            - 400 表示请求报文中存在语法错误。当错误发生时，需修改请求的内容后再次发送请求。
            - 401 表示未授权（Unauthorized)，当前请求需要用户验证
            - 403 表示对请求资源的访问被服务器拒绝了
            - 404 表示服务器上无法找到请求的资源。除此之外，也可以在服务器端拒绝请求且不想说明理由时使用。
            - 500 表示服务器端在执行请求时发生了错误。也有可能是Web应用存在的bug或某些临时的故障。
            - 503 表示服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。